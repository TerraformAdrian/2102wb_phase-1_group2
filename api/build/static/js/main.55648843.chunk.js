(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{71:function(e,t){},73:function(e,t){},96:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(37),s=n.n(a),i=n(14),o=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,99)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))},u=n(32),d=n(11),l=n(3),b=n(10),j=Object(i.b)({key:"CURRENT_USER",default:{addr:null,loggedIn:null,cid:null}}),f={logIn:b.logIn,logOut:b.unauthenticate,signUp:b.signUp,changeUser:b.reauthenticate};function O(){var e=Object(i.e)(j),t=Object(l.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){return b.currentUser().subscribe(c)}),[c]),[n,null!=n.addr,f]}var p=n(2);function h(){var e=O(),t=Object(l.a)(e,3),n=(t[0],t[1]),r=t[2],c=r.signUp,a=r.logIn;return n?Object(p.jsx)(d.a,{to:"/publish"}):Object(p.jsxs)("div",{children:[Object(p.jsx)("button",{onClick:a,children:"Log In"}),Object(p.jsx)("button",{onClick:c,children:"Sign up"})]})}var x,m=n(13),g=n(4),I="IDLE",y="PROCESSING",v=n(9),k=n.n(v),S=n(16),C=n(42),w=n(21),A=b.cdc(x||(x=Object(C.a)(["\n  import NonFungibleToken from 0xab5876435fbf2063\n  import HandyItems from 0xab5876435fbf2063\n\n  pub fun main(address: Address): [UInt64] {\n    if let collection =  getAccount(address).getCapability<&HandyItems.Collection{NonFungibleToken.CollectionPublic, HandyItems.HandyItemsCollectionPublic}>(HandyItems.CollectionPublicPath).borrow() {\n      return collection.getIDs()\n    }\n\n    return []\n  }\n"])));function U(e){return null==e?Promise.resolve([]):b.send([b.script(A),b.args([b.arg(e,w.Address)])]).then(b.decode).then((function(e){return e.sort((function(e,t){return e-t}))}))}var N=Object(i.c)({key:"account-items::state",default:Object(i.d)({key:"account-items::default",get:function(e){return Object(S.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",U(e));case 1:case"end":return t.stop()}}),t)})))}})}),R=Object(i.c)({key:"account-items::status",default:I});function P(e){var t=Object(i.e)(N(e)),n=Object(l.a)(t,2),r=n[0],c=n[1],a=Object(i.e)(R(e)),s=Object(l.a)(a,2),o=s[0],u=s[1];return{ids:r,status:o,mint:function(e,t,n,r,a,s){return Object(S.a)(k.a.mark((function i(){return k.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u(y),i.next=3,fetch("https://nftpow.herokuapp.com/v1/handy-items/mint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({recipient:e,name:t,tokenURI:n,color:r,info:a,quantity:s})});case 3:return i.next=5,U(e).then(c);case 5:u(I);case 6:case"end":return i.stop()}}),i)})))()},refresh:function(){return Object(S.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u(y),t.next=3,U(e).then(c);case 3:u(I);case 4:case"end":return t.stop()}}),t)})))()}}}n(96);function E(){var e=Object(r.useState)({txtAddress:"",txtName:"",txtImageURL:"",txtColor:"",txtInfo:"",txtQuantity:""}),t=Object(l.a)(e,2),n=t[0],c=t[1],a=O(),s=Object(l.a)(a,1)[0],i=P(s.addr);console.log(s);var o=function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(m.a)({},e.target.name,e.target.value)))};return Object(p.jsxs)("div",{className:"grid-center",children:[Object(p.jsx)("h1",{children:s.addr}),Object(p.jsx)("h1",{children:"Publish a NFT"}),Object(p.jsx)("form",{children:Object(p.jsxs)("div",{className:"grid-container",children:[Object(p.jsx)("label",{htmlFor:"txtName",children:"Name"}),Object(p.jsx)("input",{name:"txtName",id:"txtName",onChange:o}),Object(p.jsx)("label",{htmlFor:"txtAddress",children:"Address"}),Object(p.jsx)("input",{name:"txtAddress",id:"txtAddress",onChange:o}),Object(p.jsx)("label",{children:"Image URL"}),Object(p.jsx)("input",{name:"txtImageURL",id:"txtImageURL",onChange:o}),Object(p.jsx)("label",{children:"Color"}),Object(p.jsx)("input",{name:"txtColor",id:"txtColor",onChange:o}),Object(p.jsx)("label",{children:"Info"}),Object(p.jsx)("input",{name:"txtInfo",id:"txtInfo",onChange:o}),Object(p.jsx)("label",{children:"Quantity"}),Object(p.jsx)("input",{name:"txtQuantity",id:"txtQuantity",onChange:o}),Object(p.jsx)("label",{children:"Series"}),Object(p.jsx)("input",{name:"txtSeries",id:"txtSeries",onChange:o}),Object(p.jsx)("button",{onClick:function(e){e.preventDefault()}}),Object(p.jsx)("button",{disabled:i.status!==I,onClick:function(e){e.preventDefault(),i.mint(n.txtAddress,n.txtName,n.txtImageURL,n.txtColor,n.txtInfo,n.txtQuantity),console.log(i.ids.length)},children:"Send"})]})})]})}var T,F,L,H,D=n(20),Q=n(6),_=n(30),B="SET_CALLBACK",M="PROCESS",q="MAYBE_PROCESS",J="TIMEOUT",z="ENQUEUE",G="RESOLVE",K=(T={},Object(m.a)(T,Q.a,(function(e){e.put("need",new Set),e.put("processing",new Set),e.put("hold",{}),setInterval((function(){return e.sendSelf(J)}),500)})),Object(m.a)(T,B,(function(e,t,n){e.put("callback",Object(S.a)(k.a.mark((function e(){var t=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n.apply(void 0,t));case 1:case"end":return e.stop()}}),e)})))),e.sendSelf(q)})),Object(m.a)(T,z,(function(e,t,n){var r=Object(_.a)(),c={id:r,args:n,reply:t.reply};e.update("need",(function(e){return e.add(r),e})),e.update("hold",(function(e){return Object(g.a)(Object(g.a)({},e),{},Object(m.a)({},r,c))})),e.sendSelf(q)})),Object(m.a)(T,J,(function(e){e.get("need").size&&e.sendSelf(M)})),Object(m.a)(T,q,(function(e){e.get("need")>=10&&e.sendSelf(M)})),Object(m.a)(T,M,(function(e){var t=e.get("callback");if("function"===typeof t){var n=e.get("need");e.update("processing",(function(e){return new Set([].concat(Object(D.a)(e),Object(D.a)(n)))})),e.put("need",new Set);var r=e.get("hold");t(Object(D.a)(n).reduce((function(e,t){return Object(g.a)(Object(g.a)({},e),{},Object(m.a)({},t,r[t].args))}),{})).then((function(t){e.sendSelf(G,t)}))}})),Object(m.a)(T,G,(function(e,t,n){for(var r=Object.keys(n),c=function(){var t=s[a];e.get("hold")[t].reply(n[t]),e.update("processing",(function(e){return e.delete(t),e})),e.update("hold",(function(e){return delete e[t],e}))},a=0,s=r;a<s.length;a++)c()})),T),V=b.cdc(F||(F=Object(C.a)(["\nimport NonFungibleToken from 0xab5876435fbf2063\nimport HandyItems from 0xab5876435fbf2063\n\npub struct AccountItem {\n  pub let itemID: UInt64\n  pub let name: String\n  pub let tokenURI: String\n  pub let color: String\n  pub let info: String\n  pub let owner: Address\n\n  init(itemID: UInt64, name: String, tokenURI: String, color: String, info: String, owner: Address) {\n    self.itemID = itemID\n    self.name = name\n    self.tokenURI = tokenURI\n    self.color = color\n    self.info = info\n    self.owner = owner\n  }\n}\n\npub fun fetch(address: Address, id: UInt64): AccountItem? {\n  if let col = getAccount(address).getCapability<&HandyItems.Collection{NonFungibleToken.CollectionPublic, HandyItems.HandyItemsCollectionPublic}>(HandyItems.CollectionPublicPath).borrow() {\n    if let item = col.borrowHandyItem(id: id) {\n      return AccountItem(itemID: id, name: item.name, tokenURI: item.tokenURI, \n        color: item.color, info: item.info, owner: address)\n    }\n  }\n\n  return nil\n}\n\npub fun main(keys: [String], addresses: [Address], ids: [UInt64]): {String: AccountItem?} {\n  let r: {String: AccountItem?} = {}\n  var i = 0\n  while i < keys.length {\n    let key = keys[i]\n    let address = addresses[i]\n    let id = ids[i]\n    r[key] = fetch(address: address, id: id)\n    i = i + 1\n  }\n  return r\n}\n"]))),Y=function(e){return Object.keys(e).reduce((function(t,n){return t.keys.push(n),t.addresses.push(e[n][0]),t.ids.push(e[n][1]),t}),{keys:[],addresses:[],ids:[]})},W=(L="FETCH_ACCOUNT_ITEM",H=function(){var e=Object(S.a)(k.a.mark((function e(t){var n,r,c,a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Y(t),r=n.keys,c=n.addresses,a=n.ids,e.abrupt("return",b.send([b.script(V),b.args([b.arg(r,w.Array(w.String)),b.arg(c,w.Array(w.Address)),b.arg(a.map(Number),w.Array(w.UInt64))])]).then(b.decode));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Object(Q.h)(K,L),Object(Q.f)(L,B,H),{enqueue:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Object(Q.f)(L,z,t,{expectReply:!0,timeout:0})}}),X=W.enqueue;function Z(e,t){return $.apply(this,arguments)}function $(){return($=Object(S.a)(k.a.mark((function e(t,n){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=t){e.next=2;break}return e.abrupt("return",Promise.resolve(null));case 2:if(null!=n){e.next=4;break}return e.abrupt("return",Promise.resolve(null));case 4:return e.abrupt("return",X(t,n));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e){return e.split("|")}var te=Object(i.c)({key:"account-item::state",default:Object(i.d)({key:"account-item::default",get:function(e){return Object(S.a)(k.a.mark((function t(){return k.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Z.apply(void 0,Object(D.a)(ee(e))));case 1:case"end":return t.stop()}}),t)})))}})}),ne=Object(i.c)({key:"account-item::status",default:I});function re(e){var t=e.address,n=e.id,r=function(e,t){var n=O(),r=Object(l.a)(n,1)[0],c=(P(e),function(e,t){return[e,t].join("|")}(e,t)),a=Object(i.e)(te(c)),s=Object(l.a)(a,2),o=s[0],u=s[1],d=Object(i.e)(ne(c)),j=Object(l.a)(d,2),f=j[0],p=j[1];return Object(g.a)(Object(g.a)({},o),{},{status:f,owned:Object(b.sansPrefix)(r.addr)===Object(b.sansPrefix)(e),refresh:function(){return Object(S.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p(y),e.next=3,Z.apply(void 0,Object(D.a)(ee(c))).then(u);case 3:p(I);case 4:case"end":return e.stop()}}),e)})))()}})}(t,n);r.status;return null==t||null==n?null:Object(p.jsxs)("div",{className:"grid-list",children:[Object(p.jsxs)("h3",{children:["Handy#",r.itemID]}),Object(p.jsx)("p",{children:r.name}),Object(p.jsx)("p",{children:r.tokenURI}),Object(p.jsx)("p",{children:r.color}),Object(p.jsx)("p",{children:r.info})]})}function ce(e){return Object(p.jsx)(r.Suspense,{fallback:null,children:Object(p.jsx)(re,Object(g.a)({},e))})}function ae(e){var t=e.address,n=P(t),r=O();Object(l.a)(r,1)[0];return null==t?null:n.ids.length<=0?Object(p.jsx)("p",{children:"No Items"}):Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"grid-list",children:[Object(p.jsx)("h2",{children:"ID"}),Object(p.jsx)("h2",{children:"Name"}),Object(p.jsx)("h2",{children:"Image URL"}),Object(p.jsx)("h2",{children:"Color"}),Object(p.jsx)("h2",{children:"Info"})]}),n.ids.map((function(e){return Object(p.jsx)(ce,{id:e,address:t},e)}))]})}function se(e){var t=e.address;return Object(p.jsx)(r.Suspense,{fallback:null,children:Object(p.jsx)(ae,{address:t})})}n(97);function ie(){var e=Object(r.useState)({txtAddress:""}),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(l.a)(a,2),i=s[0],o=s[1],u=(Object(d.g)(),O());Object(l.a)(u,1)[0];return Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"NFT Listings"}),Object(p.jsxs)("div",{children:[Object(p.jsx)("label",{children:"Address: "}),Object(p.jsx)("input",{name:"txtAddress",id:"txtAddress",onChange:function(e){c(Object(g.a)(Object(g.a)({},n),{},Object(m.a)({},e.target.name,e.target.value)))}}),Object(p.jsx)("button",{onClick:function(e){o(n.txtAddress)},children:"List NFTs"}),""!=i&&Object(p.jsx)(se,{address:i})]})]})}function oe(){return Object(p.jsx)("div",{children:"Page Not Found"})}window.fcl=b,window.t=w,b.config().put("accessNode.api","https://access-testnet.onflow.org").put("discovery.wallet","https://fcl-discovery.onflow.org/testnet/authn"),s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(i.a,{children:Object(p.jsx)(u.a,{children:Object(p.jsxs)(d.d,{children:[Object(p.jsx)(d.b,{exact:!0,path:"/publish",children:Object(p.jsx)(r.Suspense,{fallback:null,children:Object(p.jsx)(E,{})})}),Object(p.jsx)(d.b,{exact:!0,path:"/list",children:Object(p.jsx)(ie,{})}),Object(p.jsx)(d.b,{exact:!0,path:"/",children:Object(p.jsx)(h,{})}),Object(p.jsx)(d.b,{children:Object(p.jsx)(oe,{})})]})})})}),document.getElementById("root")),o()}},[[98,1,2]]]);
//# sourceMappingURL=main.55648843.chunk.js.map